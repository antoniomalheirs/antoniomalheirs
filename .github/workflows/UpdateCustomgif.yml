name: Generate GitHub Stats GIFs

on:
  schedule:
    # Executa todos os dias √†s 12:00 UTC
    - cron: "0 12 * * *"
  workflow_dispatch:

permissions:
  # Permiss√£o de escrita para que as actions possam commitar os arquivos gerados
  contents: write

jobs:
  Generate-Stats-and-GIFs:
    runs-on: ubuntu-latest
    concurrency:
      group: stats-concurrency
      cancel-in-progress: true
    steps:
      # Passo 1: Faz o checkout do c√≥digo do seu reposit√≥rio
      - name: Checkout Repo
        uses: actions/checkout@v3

      # Passo 2: Roda a primeira action para gerar o arquivo JSON com as estat√≠sticas
      - name: Generate Stats File
        uses: LukeHagar/stats-action@main
        with:
          # O arquivo ser√° salvo em 'generated/stats.json'
          output_path: generatedStats/stats.json
        env:
          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}

      # üëá PASSO 3: RODA A SEGUNDA ACTION PARA GERAR OS GIFS
      - name: Generate Remotion GIFs
        uses: lukeHagar/github-stats-remotion@main # <--- Action do reposit√≥rio que voc√™ mostrou
        with:
          # Informa a esta action onde encontrar o arquivo JSON gerado no passo anterior
          stats_path: generatedStats/stats.json
          # (Opcional) Voc√™ pode precisar definir outros par√¢metros aqui
          # como o nome do arquivo de sa√≠da do GIF, se a action permitir.
